/*! For license information please see app.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/js/app.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_functions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/functions.js */ \"./src/js/modules/functions.js\");\n/* harmony import */ var _layouts_header_header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layouts/header/header.js */ \"./src/layouts/header/header.js\");\n/* harmony import */ var _pages_login_login_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../pages/login/login.js */ \"./src/pages/login/login.js\");\n/* harmony import */ var _pages_registration_registration_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pages/registration/registration.js */ \"./src/pages/registration/registration.js\");\n\r\n\r\n/* Импорт функций */\r\n// Общие функции\r\n;\r\n// Блок Header\r\n\r\n// Страница login.html\r\n\r\n// Страница registration.html\r\n\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\r\n    const usersDB = 'https://6536d186bb226bb85dd2a7da.mockapi.io/users'\r\n\r\n    //  Функция проверки браузера на поддержку webp\r\n    _modules_functions_js__WEBPACK_IMPORTED_MODULE_0__.isWebp();\r\n\r\n    // Добавляет класс .noFooter для HTML\r\n    // далее css регулирует высоту .main на указаных страницах\r\n    _modules_functions_js__WEBPACK_IMPORTED_MODULE_0__.htmlAddClassNoFooter([\r\n        'Главная',\r\n        'Регистрация',\r\n        'Вход',\r\n    ]);\r\n\r\n\r\n    (0,_layouts_header_header_js__WEBPACK_IMPORTED_MODULE_1__.header)()\r\n\r\n\r\n    // Функционал страницы входа\r\n\r\n    ;(0,_pages_login_login_js__WEBPACK_IMPORTED_MODULE_2__.login)('login.html')\r\n\r\n    // Функционал страницы регистрации\r\n    ;(0,_pages_registration_registration_js__WEBPACK_IMPORTED_MODULE_3__.registration)('registration.html')\r\n\r\n}); // document.addEventListener('DOMContentLoaded'\r\n\r\n\n\n//# sourceURL=webpack://gulp-dnd-manager/./src/js/app.js?")},"./src/js/modules/functions.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   htmlAddClassNoFooter: () => (/* binding */ htmlAddClassNoFooter),\n/* harmony export */   isWebp: () => (/* binding */ isWebp)\n/* harmony export */ });\n/* Проверка поддержки webp, добавление класса webp или no-webp для HTML */\r\nfunction isWebp() {\r\n    // Проверка поддержки webp \r\n    function testWebP(callback) {\r\n        let webP = new Image();\r\n        webP.onload = webP.onerror = function () {\r\n            callback(webP.height == 2);\r\n        };\r\n        webP.src = \"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA\";\r\n    }\r\n    // Добавление класса _webp или _no-webp для HTML\r\n    testWebP(function (support) {\r\n        let className = support === true ? 'webp' : 'no-webp';\r\n        document.documentElement.classList.add(className);\r\n    });\r\n}\r\n\r\nfunction htmlAddClassNoFooter(arr) {\r\n    const currentPage = document.title;\r\n    const cropMenu = arr;\r\n\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        for (const iterator of cropMenu) {\r\n            if (iterator == currentPage) {\r\n                document.querySelector('html').classList.remove('noFooter');\r\n                document.querySelector('html').classList.add('noFooter');\r\n                break\r\n            } else {\r\n                document.querySelector('html').classList.remove('noFooter');\r\n            }\r\n        }\r\n    })\r\n\r\n};\r\n\r\n\n\n//# sourceURL=webpack://gulp-dnd-manager/./src/js/modules/functions.js?")},"./src/layouts/header/header.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   header: () => (/* binding */ header)\n/* harmony export */ });\nfunction header() {\r\n    const currentPageTitle = document.title;\r\n    const header = document.querySelector('.header');\r\n    const leftButton = document.querySelector('.header__btn-left');\r\n    const title = document.querySelector('.header__title');\r\n    const rightButton = document.querySelector('.header__btn-right');\r\n    let previousPage;\r\n\r\n\r\n    console.log(window.location.href);\r\n    console.log(currentPageTitle);\r\n\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        leftButton.href = localStorage.getItem('previousPage')\r\n        title.textContent = currentPageTitle;\r\n        leftBtnControl();\r\n    });\r\n\r\n    function leftBtnControl(){\r\n        if(currentPageTitle == 'Главная'){\r\n            leftButton.classList.add(\"hide\")\r\n            rightButton.classList.add(\"hide\")\r\n        } else{\r\n            leftButton.classList.remove(\"hide\")\r\n            rightButton.classList.remove(\"hide\")\r\n        }\r\n    };\r\n\r\n    window.addEventListener('unload', () => {\r\n        localStorage.setItem('previousPages', previousPages.push(window.location.href));\r\n    });\r\n}\n\n//# sourceURL=webpack://gulp-dnd-manager/./src/layouts/header/header.js?")},"./src/pages/login/login.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   login: () => (/* binding */ login)\n/* harmony export */ });\nfunction login(regPage) {\r\n\r\n    // Получаем имя текущей страницы\r\n    // Проверяем совпадает ли оно с названием файла HTML\r\n    if (window.location.pathname.split("/").pop() === regPage) {\r\n        console.log(\'Добро пожаловать на страницу регистрации!\');\r\n\r\n        // Получаем элементы формы\r\n        const loginForm = document.querySelector(".login__form");\r\n        const loginNickname = document.querySelector(".login__nickname");\r\n        const loginPassword = document.querySelector(".login__password");\r\n\r\n        // Добавляем обработчик события на отправку формы\r\n        loginForm.addEventListener("submit", function (event) {\r\n            // Отменяем действие по умолчанию (перезагрузку страницы)\r\n            event.preventDefault();\r\n\r\n            // Получаем введенные пользователем данные\r\n            const username = loginNickname.value;\r\n            const password = loginPassword.value;\r\n\r\n            // Проверяем, не пустые ли поля\r\n            if (username && password) {\r\n                // Создаем запрос к базе пользователей с помощью fetch API\r\n                fetch("https://6536d186bb226bb85dd2a7da.mockapi.io/users")\r\n                    .then(response => {\r\n                        // Проверяем, успешен ли запрос\r\n                        if (response.ok) {\r\n                            // Возвращаем ответ в виде массива объектов\r\n                            return response.json();\r\n                        } else {\r\n                            // Выводим сообщение об ошибке в консоль\r\n                            console.error("Ошибка запроса: " + response.status);\r\n                        }\r\n                    })\r\n                    .then(users => {\r\n                        // Ищем пользователя с введенным именем в массиве\r\n                        const user = users.find(user => user.username === username);\r\n                        // Проверяем, нашли ли мы такого пользователя\r\n                        if (user) {\r\n                            // Проверяем, совпадает ли пароль\r\n                            if (user.password === password) {\r\n                                // Выводим сообщение в консоль\r\n                                console.log("Имя пользователя и пароль совпадает");\r\n                            } else {\r\n                                // Выводим сообщение в консоль\r\n                                console.log("Пароль не подходит");\r\n                            }\r\n                        } else {\r\n                            // Выводим сообщение в консоль\r\n                            console.log("Такого пользователя не существует");\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        // Выводим сообщение об ошибке в консоль\r\n                        console.error("Ошибка запроса: " + error.message);\r\n                    });\r\n            } else {\r\n                // Выводим сообщение в консоль\r\n                console.log("Пожалуйста, заполните все поля");\r\n            }\r\n        });\r\n\r\n    };\r\n};\r\n\r\n\n\n//# sourceURL=webpack://gulp-dnd-manager/./src/pages/login/login.js?')},"./src/pages/registration/registration.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   registration: () => (/* binding */ registration)\n/* harmony export */ });\nfunction registration(regPage) {\r\n\r\n    // Получаем имя текущей страницы\r\n    // Проверяем, является ли оно login.html\r\n    if (window.location.pathname.split(\"/\").pop() === regPage) {\r\n        console.log('Добро пожаловать на страницу регистрации!');\r\n\r\n        // Получаем элементы формы\r\n        const form = document.querySelector('.registration__form');\r\n        const nicknameInput = document.querySelector('.registration__nickname');\r\n        const passwordInput = document.querySelector('.registration__password');\r\n\r\n        // Добавляем обработчик события на отправку формы\r\n        form.addEventListener('submit', (event) => {\r\n            // Отменяем действие по умолчанию\r\n            event.preventDefault();\r\n            // Получаем введенные значения\r\n            const nickname = nicknameInput.value;\r\n            const password = passwordInput.value;\r\n            // Проверяем, что поля не пустые\r\n            if (nickname && password) {\r\n                // Создаем запрос к базе данных\r\n                fetch('https://6536d186bb226bb85dd2a7da.mockapi.io/users')\r\n                    .then((response) => response.json()) // Преобразуем ответ в JSON\r\n                    .then((data) => {\r\n                        // Проверяем, есть ли пользователь с таким именем в базе\r\n                        const user = data.find((user) => user.username === nickname);\r\n                        if (user) {\r\n                            // Если есть, выводим сообщение в консоль\r\n                            console.log('Такой пользователь существует');\r\n                        } else {\r\n                            // Если нет, выводим другое сообщение в консоль\r\n                            console.log('Вы зарегистрированы!');\r\n                            // Создаем объект с данными нового пользователя\r\n                            const newUser = {\r\n                                username: nickname,\r\n                                password: password,\r\n                                accessLevel: 'user',\r\n                                characters: {},\r\n                            };\r\n                            // Добавляем нового пользователя в базу данных с методом POST\r\n                            fetch('https://6536d186bb226bb85dd2a7da.mockapi.io/users', {\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    'Content-Type': 'application/json'\r\n                                },\r\n                                body: JSON.stringify(newUser) // Преобразуем объект в строку\r\n                            })\r\n                                .then((response) => response.json()) // Преобразуем ответ в JSON\r\n                                .then((data) => {\r\n                                    // Выводим данные нового пользователя в консоль\r\n                                    console.log(data);\r\n                                })\r\n                                .catch((error) => {\r\n                                    // Если произошла ошибка, выводим ее в консоль\r\n                                    console.error(error);\r\n                                });\r\n                            // Переходим на страницу входа\r\n                            window.location.href = 'login.html';\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        // Если произошла ошибка, выводим ее в консоль\r\n                        console.error(error);\r\n                    });\r\n            } else {\r\n                // Если поля пустые, выводим предупреждение в консоль\r\n                console.warn('Заполните все поля');\r\n            }\r\n        });\r\n    };\r\n};\n\n//# sourceURL=webpack://gulp-dnd-manager/./src/pages/registration/registration.js?")}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(r,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/js/app.js")})();